{"version":3,"sources":["components/home/HomeCarousel.jsx","components/home/FeaturedProjects.jsx"],"names":["SampleNextArrow","props","className","style","onClick","display","background","borderRadius","width","height","textAlign","SamplePrevArrow","HomeCarousel","min","max","term","settings","infinite","cssEase","dots","swipeToSlide","autoplay","autoplaySpeed","Math","ceil","floor","random","pauseOnDotsHover","pauseOnHover","swipe","touchThreshold","mobileFirst","nextArrow","prevArrow","variableWidth","adaptiveHeight","afterChange","index","responsive","breakpoint","slidesToScroll","arrows","centerPadding","centerMode","React","useState","projList","setProjList","searchTerm","setSearchTerm","useEffect","queryDatabase","searchValue","query","MATCH_RETURN_RANDOM","esAxios","get","then","response","shuffle","data","hits","console","log","catch","error","Fragment","Divider","Container","Grid","container","item","xs","marginTop","marginBottom","sm","md","align","to","location","pathname","textDecoration","fontSize","color","light","map","r","i","ProjectCard","key","Array","from","Box","marginRight","my","Skeleton","variant","useStyles","makeStyles","theme","arrowBtn","backgroundColor","palette","secondary","main","margin","chip","spacing","primary","border","FeaturedProjects","classes","dispatch","useDispatch","pageNum","setPageNum","topDiv","useRef","authData","useTrackedState","isProgress","progress","setProgress","history","useHistory","grow","setGrow","loading","setLoading","interests","disabled","formValues","setFormValues","baseCats","categories","setCategories","handlePersonalize","_source","isAuthenticated","length","push","updateData","hit","updateAuthData","updateProgress","timer","setTimeout","setInterests","clearTimeout","alignContent","fontWeight","Button","startIcon","textTransform","ProgressBar","Collapse","in","IconButton","value","fullWidth","label","onAdd","field","values","handleAddChip","concat","toTitleCase","onDelete","objProp","newArr","filter","Object","assign","handleDeleteChip","status","id","_id","q","doc","lastUpdatedAt","Date","formData","FormData","append","JSON","stringify","updateUserInterests","saveInterests","slice","cat","ref","justify","size","window","scrollTo","current","offsetTop","clientHeight","CircularProgress"],"mappings":"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","file":"static/js/17.8c949e57.chunk.js","sourcesContent":["import React from \"react\";\nimport shuffle from \"lodash/shuffle\";\nimport ProjectCard from \"./ProjectCard\";\nimport Container from \"@material-ui/core/Container\";\nimport Slider from \"react-slick\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { MATCH, MATCH_RETURN_RANDOM } from \"../backend/EsQueries\";\nimport { esAxios } from \"../backend/AxiosRequest\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Box from \"@material-ui/core/Box\";\nimport { Link } from \"react-router-dom\";\nimport StopRoundedIcon from \"@material-ui/icons/StopRounded\";\nimport DoubleArrowSharpIcon from \"@material-ui/icons/DoubleArrowSharp\";\n\nfunction SampleNextArrow(props) {\n  const { className, style, onClick } = props;\n  return (\n    <div\n      className={className}\n      style={{\n        ...style,\n        display: \"block\",\n        background: \"#E8E8E8\",\n        borderRadius: 15,\n        width: \"2rem\",\n        height: \"2rem\",\n        textAlign: \"center\",\n      }}\n      onClick={onClick}\n    />\n  );\n}\n\nfunction SamplePrevArrow(props) {\n  const { className, style, onClick } = props;\n  return (\n    <div\n      className={className}\n      style={{\n        ...style,\n        display: \"block\",\n        background: \"#E8E8E8\",\n        borderRadius: 15,\n        width: \"2rem\",\n        height: \"2rem\",\n        textAlign: \"center\",\n      }}\n      onClick={onClick}\n    />\n  );\n}\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport default function HomeCarousel({ term }) {\n  const settings = {\n    className: \"center\",\n    infinite: true,\n    cssEase: \"linear\",\n    dots: true,\n    swipeToSlide: true,\n    autoplay: true,\n    autoplaySpeed: getRandomInt(10000, 12000),\n    pauseOnDotsHover: true,\n    pauseOnHover: true,\n    swipe: true,\n    touchThreshold: 100,\n    mobileFirst: true,\n    nextArrow: <SampleNextArrow />,\n    prevArrow: <SamplePrevArrow />,\n    variableWidth: true,\n    adaptiveHeight: true,\n    afterChange: function (index) {\n      // console.log(\n      //   `Slider Changed to: ${index + 1}, background: #222; color: #bada55`\n      // );\n    },\n    responsive: [\n      {\n        breakpoint: 1024,\n        settings: {\n          slidesToScroll: 3,\n\n          arrows: true,\n          dots: true,\n          centerPadding: \"4rem\",\n          centerMode: true,\n        },\n      },\n      {\n        breakpoint: 800,\n        settings: {\n          slidesToScroll: 2,\n\n          centerPadding: \"1.2rem\",\n          centerMode: true,\n          autoplay: false,\n          arrows: false,\n          dots: true,\n        },\n      },\n      {\n        breakpoint: 480,\n        settings: {\n          slidesToScroll: 1,\n          centerPadding: \"1.2rem\",\n          centerMode: true,\n          autoplay: false,\n          arrows: false,\n          dots: true,\n        },\n      },\n    ],\n  };\n\n  const [projList, setProjList] = React.useState();\n  const [searchTerm, setSearchTerm] = React.useState();\n  React.useEffect(() => {\n    if (term && term !== searchTerm) {\n      queryDatabase(term);\n      setSearchTerm(term);\n    }\n  }, [term]);\n  const queryDatabase = (searchValue) => {\n    //real random\n    let query = MATCH_RETURN_RANDOM(searchValue, \"storyText\", 10);\n    esAxios\n      .get(`/q/`, query)\n      .then((response) => {\n        const shuffledProjectList = shuffle(response.data.hits.hits);\n        console.log(response.data.hits);\n        setProjList(response.data.hits.hits);\n      })\n      .catch((error) => {\n        // catch errors.\n        console.log(error);\n      });\n  };\n\n  return (\n    <React.Fragment>\n      {projList && projList[0] ? (\n        <React.Fragment>\n          <Divider style={{ height: \"3px\" }} />\n          <Container>\n            <Grid container>\n              <Grid item xs={12}>\n                <Divider\n                  style={{\n                    height: \"3px\",\n                    marginTop: \"1rem\",\n                    marginBottom: \"1rem\",\n                  }}\n                />\n              </Grid>\n\n              <Grid item sm={8} xs={8} md={8} align=\"left\">\n                <h5>\n                  <StopRoundedIcon />\n                  {\" \" + term}\n                </h5>\n              </Grid>\n              <Grid item sm={4} xs={4} md={4} align=\"right\">\n                <Link\n                  to={(location) => ({\n                    ...location,\n                    pathname: \"/search/\" + term,\n                  })}\n                  style={{\n                    textDecoration: \"none\",\n                    fontSize: \"1rem\",\n                    color: \"black\",\n                  }}\n                >\n                  View more <DoubleArrowSharpIcon />\n                </Link>\n              </Grid>\n            </Grid>\n          </Container>\n          <Divider light />\n\n          <Grid item xs={12}>\n            <Container>\n              <Slider {...settings}>\n                {projList.map((r, i) => (\n                  <ProjectCard key={i} r={r} />\n                ))}\n              </Slider>\n            </Container>\n          </Grid>\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <Grid item xs={12}>\n            <Container>\n              <Slider {...settings}>\n                {Array.from(new Array(6)).map((item, index) => (\n                  <Box key={index} width={210} marginRight={0.5} my={5}>\n                    <Skeleton variant=\"rect\" width=\"100%\" height={50} />\n                    <Skeleton />\n                    <Skeleton width=\"60%\" />\n                  </Box>\n                ))}\n              </Slider>\n            </Container>\n          </Grid>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport HomeCorousel from \"./HomeCarousel\";\nimport Box from \"@material-ui/core/Box\";\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TuneIcon from \"@material-ui/icons/Tune\";\nimport { Button, IconButton } from \"@material-ui/core\";\nimport { useTrackedState, useDispatch } from \"reactive-react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport FeaturedPlayListOutlinedIcon from \"@material-ui/icons/FeaturedPlayListOutlined\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport ChipInput from \"material-ui-chip-input\";\nimport { toTitleCase } from \"../js/utils\";\nimport ProgressBar from \"../search/ProgressBar\";\nimport { updateAuthData, updateProgress } from \"../redux/actions\";\nimport shuffle from \"lodash/shuffle\";\nimport { updateUserInterests } from \"../backend/AxiosRequest\";\n\nconst useStyles = makeStyles((theme) => ({\n  arrowBtn: {\n    backgroundColor: theme.palette.secondary.main,\n    margin: \"1rem\",\n  },\n  chip: {\n    margin: theme.spacing(0.5),\n    variant: \"outlined\",\n    height: \"1.5rem\",\n    color: theme.palette.primary.main,\n    border: \"1px solid\",\n  },\n}));\n\n// function filterProjectList(projList) {\n//   let categs = [];\n//   let cat_list = [];\n//   projList.forEach((element) => {\n//     if (!categs.includes(element._source.category)) {\n//       // get all the unique categories\n//       categs.push(element._source.category);\n\n//       // filter the es search json and add to list\n//       cat_list.push(\n//         projList.filter((d) => d._source.category === element._source.category)\n//       );\n//     }\n//   });\n\n//   return cat_list.sort((a, b) => b.length - a.length).slice(0, 4);\n// }\n\n// function shuffle(a) {\n//   for (let i = a.length - 1; i > 0; i--) {\n//     const j = Math.floor(Math.random() * (i + 1));\n//     [a[i], a[j]] = [a[j], a[i]];\n//   }\n//   return a;\n// }\n\nexport default function FeaturedProjects() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const [pageNum, setPageNum] = React.useState(3);\n  const topDiv = React.useRef(null);\n  const { authData } = useTrackedState();\n  const { isProgress } = useTrackedState();\n  const [progress, setProgress] = React.useState(false);\n  const history = useHistory();\n  const [grow, setGrow] = React.useState(false);\n  const [loading, setLoading] = React.useState(false);\n  const [formValues, setFormValues] = React.useState({\n    interests: [],\n    disabled: true,\n  });\n  const baseCats = [\n    \"Masks\",\n    \"Telehealth\",\n    \"Artificial Intelligence\",\n    \"Vaccine\",\n    \"Personal Protective Equipment\",\n    \"Contact Tracing\",\n    \"Drug Discovery\",\n    \"Robotics\",\n    \"Symptoms\",\n    \"Home Delivery\",\n    \"Distance Learning\",\n    \"Bioinformatics\",\n    \"Databases\",\n  ];\n  const [categories, setCategories] = React.useState([]);\n\n  const handleMore = () => {\n    setLoading(true);\n    setTimeout(() => setLoading(false), 2000);\n    setPageNum(pageNum + 3);\n    window.scrollTo(0, topDiv.current.offsetTop + topDiv.current.clientHeight);\n  };\n\n  React.useEffect(() => setProgress(isProgress), [isProgress]);\n\n  const handlePersonalize = () => {\n    if (!authData._source && !authData.isAuthenticated) {\n      history.push(\"/sign-in\");\n      return;\n    } else if (\n      authData._source &&\n      authData._source.interests &&\n      authData._source.interests.length > 0\n    ) {\n      setFormValues({ interests: authData._source.interests, disabled: true });\n      setGrow(true);\n    } else {\n      setGrow(true);\n    }\n  };\n\n  const handleDeleteChip = (chip, objProp) => {\n    let newArr = [...formValues[objProp]].filter((item) => item !== chip);\n    setFormValues(\n      Object.assign({}, formValues, { [objProp]: newArr, disabled: false })\n    );\n  };\n\n  const handleAddChip = (field, values) => {\n    // copy new values to formValues\n    setFormValues({ ...formValues, [field]: values, disabled: false });\n  };\n\n  const updateData = (hit) => {\n    dispatch(updateAuthData({ ...authData, _source: hit._source }));\n    dispatch(updateProgress(false));\n  };\n\n  const saveInterests = () => {\n    let data = {\n      status: \"userupdates\",\n      index: \"user_data\",\n      id: authData._id,\n      q: {\n        doc: {\n          interests: formValues.interests,\n          lastUpdatedAt: new Date(),\n        },\n      },\n    };\n    let formData = new FormData();\n    formData.append(\"params\", JSON.stringify(data));\n    updateUserInterests(formData, authData.key, updateData);\n  };\n\n  const handleSave = () => {\n    dispatch(updateProgress(true));\n    saveInterests();\n    setGrow(false);\n  };\n\n  const setInterests = (authData) => {\n    if (\n      authData._source &&\n      authData._source.interests &&\n      authData._source.interests.length > 0\n    ) {\n      setCategories(authData._source.interests);\n    } else {\n      setCategories(shuffle(baseCats));\n    }\n    if (!authData.isAuthenticated) {\n      setGrow(false);\n    }\n  };\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => {\n      setInterests(authData);\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, [authData]);\n\n  return (\n    <Box>\n      <hr></hr>\n      <Container>\n        <Grid container alignContent=\"space-between\">\n          <Grid item xs={6} sm={6} md={6}>\n            <h4 style={{ fontWeight: 700 }}>\n              <FeaturedPlayListOutlinedIcon />{\" \"}\n              {!authData.isAuthenticated || categories === baseCats\n                ? \"Popular topics\"\n                : \"Your feed\"}\n            </h4>\n          </Grid>\n          <Grid item xs={6} sm={6} md={6} align=\"right\">\n            <Button\n              onClick={handlePersonalize}\n              startIcon={<TuneIcon />}\n              style={{ color: \"grey\", fontWeight: 700, textTransform: \"none\" }}\n            >\n              Customize feed\n            </Button>\n          </Grid>\n          {progress ? <ProgressBar /> : null}\n        </Grid>\n        <Collapse in={grow}>\n          <Grid container>\n            <Grid item xs={6} sm={6} md={9}>\n              Enter your interests to personalize the homepage feed.\n            </Grid>\n            <Grid item xs={6} sm={6} md={3} align=\"right\">\n              <IconButton onClick={() => setGrow(false)} color=\"primary\">\n                <CloseIcon />\n              </IconButton>\n            </Grid>\n            <Grid item xs={12} sm={12} md={12}>\n              <ChipInput\n                value={formValues.interests}\n                classes={{\n                  chip: classes.chip,\n                }}\n                fullWidth\n                label=\"Tap enter to add more\"\n                onAdd={(chip) => {\n                  handleAddChip(\n                    \"interests\",\n                    [...formValues.interests].concat([toTitleCase(chip)])\n                  );\n                }}\n                onDelete={(chip, index) => handleDeleteChip(chip, \"interests\")}\n              />\n            </Grid>\n            <Grid item xs={12} sm={12} md={12} align=\"right\">\n              <Button\n                disabled={formValues.disabled}\n                onClick={handlePersonalize}\n              >\n                Cancel\n              </Button>\n              <Button disabled={formValues.disabled} onClick={handleSave}>\n                Save\n              </Button>\n            </Grid>\n          </Grid>\n        </Collapse>\n      </Container>\n      {categories.slice(0, pageNum).map((cat, i) => (\n        <Box key={i} ref={topDiv}>\n          <Grid container spacing={2}>\n            <HomeCorousel term={cat} />\n          </Grid>\n        </Box>\n      ))}\n      <Grid container justify=\"center\">\n        {pageNum >= categories.length ? null : (\n          <Grid item xs={12} align=\"center\">\n            Load more\n            <IconButton\n              size=\"small\"\n              className={classes.arrowBtn}\n              onClick={handleMore}\n            >\n              {loading ? <CircularProgress size={20} /> : <ArrowDownwardIcon />}\n            </IconButton>\n          </Grid>\n        )}\n      </Grid>\n    </Box>\n  );\n}\n"],"sourceRoot":""}