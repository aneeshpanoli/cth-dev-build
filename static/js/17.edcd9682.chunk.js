(this.webpackJsonpcivictechhub=this.webpackJsonpcivictechhub||[]).push([[17],{1072:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return X}));var n=a(7),r=a(29),c=a(50),i=a(9),l=a(0),s=a.n(l),o=a(698),m=a(987),u=a.n(m),d=a(204),E=a(819),h=a.n(E),b=a(75),f=a(58),g=a(18),p=a(812),O=a(1063),j=a(697),y=a(23),v=a(1031),k=a.n(v),w=a(1032),x=a.n(w);function S(e){var t=e.className,a=e.style,r=e.onClick;return s.a.createElement("div",{className:t,style:Object(n.a)(Object(n.a)({},a),{},{display:"block",background:"#E8E8E8",borderRadius:15,width:"2rem",height:"2rem",textAlign:"center"}),onClick:r})}function T(e){var t=e.className,a=e.style,r=e.onClick;return s.a.createElement("div",{className:t,style:Object(n.a)(Object(n.a)({},a),{},{display:"block",background:"#E8E8E8",borderRadius:15,width:"2rem",height:"2rem",textAlign:"center"}),onClick:r})}function C(e){var t,a,r=e.term,c={className:"center",infinite:!0,cssEase:"linear",dots:!0,swipeToSlide:!0,autoplay:!0,autoplaySpeed:(t=1e4,a=12e3,t=Math.ceil(t),a=Math.floor(a),Math.floor(Math.random()*(a-t))+t),pauseOnDotsHover:!0,pauseOnHover:!0,swipe:!0,touchThreshold:100,mobileFirst:!0,nextArrow:s.a.createElement(S,null),prevArrow:s.a.createElement(T,null),variableWidth:!0,adaptiveHeight:!0,afterChange:function(e){},responsive:[{breakpoint:1024,settings:{slidesToScroll:3,arrows:!0,dots:!0,centerPadding:"4rem",centerMode:!0}},{breakpoint:800,settings:{slidesToScroll:2,centerPadding:"1.2rem",centerMode:!0,autoplay:!1,arrows:!1,dots:!0}},{breakpoint:480,settings:{slidesToScroll:1,centerPadding:"1.2rem",centerMode:!0,autoplay:!1,arrows:!1,dots:!0}}]},l=s.a.useState(),m=Object(i.a)(l,2),E=m[0],v=m[1],w=s.a.useState(),C=Object(i.a)(w,2),_=C[0],A=C[1];s.a.useEffect((function(){r&&r!==_&&(D(r),A(r))}),[r]);var D=function(e){var t=Object(f.b)(e,"storyText",10);g.d.get("/q/",t).then((function(e){var t=u()(e.data.hits.hits);console.log(e.data.hits),v(t)})).catch((function(e){console.log(e)}))};return s.a.createElement(s.a.Fragment,null,E&&E[0]?s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{style:{height:"3px"}}),s.a.createElement(o.a,null,s.a.createElement(b.a,{container:!0},s.a.createElement(b.a,{item:!0,xs:12},s.a.createElement(p.a,{style:{height:"3px",marginTop:"1rem",marginBottom:"1rem"}})),s.a.createElement(b.a,{item:!0,sm:8,xs:8,md:8,align:"left"},s.a.createElement("h5",null,s.a.createElement(k.a,null)," "+r)),s.a.createElement(b.a,{item:!0,sm:4,xs:4,md:4,align:"right"},s.a.createElement(y.b,{to:function(e){return Object(n.a)(Object(n.a)({},e),{},{pathname:"/search/"+r})},style:{textDecoration:"none",fontSize:"1rem",color:"black"}},"View more "," ",s.a.createElement(x.a,null))))),s.a.createElement(p.a,{light:!0}),s.a.createElement(b.a,{item:!0,xs:12},s.a.createElement(o.a,null,s.a.createElement(h.a,c,E.map((function(e,t){return s.a.createElement(d.a,{key:t,r:e})})))))):s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{item:!0,xs:12},s.a.createElement(o.a,null,s.a.createElement(h.a,c,Array.from(new Array(6)).map((function(e,t){return s.a.createElement(j.a,{key:t,width:210,marginRight:.5,my:5},s.a.createElement(O.a,{variant:"rect",width:"100%",height:50}),s.a.createElement(O.a,null),s.a.createElement(O.a,{width:"60%"}))})))))))}var _=a(772),A=a.n(_),D=a(121),M=a(1034),N=a.n(M),P=a(147),z=a(187),F=a(238),H=a(396),R=a(28),B=a(629),W=a(631),q=a(1033),J=a.n(q),I=a(244),L=a.n(I),V=a(133),U=a.n(V),Y=a(92),G=a(177),K=a(13),Q=Object(D.a)((function(e){return{arrowBtn:{backgroundColor:e.palette.secondary.main,margin:"1rem"},chip:{margin:e.spacing(.5),variant:"outlined",height:"1.5rem",color:e.palette.primary.main,border:"1px solid"}}}));function X(){var e=Q(),t=Object(F.a)(),a=s.a.useState(3),l=Object(i.a)(a,2),m=l[0],u=l[1],d=s.a.useRef(null),E=Object(H.a)().authData,h=Object(H.a)().isProgress,f=s.a.useState(!1),p=Object(i.a)(f,2),O=p[0],y=p[1],v=Object(R.f)(),k=s.a.useState(!1),w=Object(i.a)(k,2),x=w[0],S=w[1],T=s.a.useState(!1),_=Object(i.a)(T,2),D=_[0],M=_[1],q=s.a.useState({interests:[],disabled:!0}),I=Object(i.a)(q,2),V=I[0],X=I[1],Z=["Masks","Telehealth","Artificial Intelligence","Vaccine","Personal Protective Equipment","Contact Tracing","Drug Discovery","Robotics","Symptoms","Home Delivery","Distance Learning","Bioinformatics","Databases"],$=s.a.useState([]),ee=Object(i.a)($,2),te=ee[0],ae=ee[1];s.a.useEffect((function(){return y(h)}),[h]);var ne=function(){E._source||E.isAuthenticated?E._source&&E._source.interests&&E._source.interests.length>0?(X({interests:E._source.interests,disabled:!0}),S(!0)):S(!0):v.push("/sign-in")},re=function(e){t(Object(K.a)(Object(n.a)(Object(n.a)({},E),{},{_source:e._source}))),t(Object(K.g)(!1))};return s.a.useEffect((function(){var e=setTimeout((function(){!function(e){e._source&&e._source.interests&&e._source.interests.length>0?ae(e._source.interests):ae(Z),e.isAuthenticated||S(!1)}(E)}),1e3);return function(){return clearTimeout(e)}}),[E]),s.a.createElement(j.a,null,s.a.createElement("hr",null),s.a.createElement(o.a,null,s.a.createElement(b.a,{container:!0,alignContent:"space-between"},s.a.createElement(b.a,{item:!0,xs:6,sm:6,md:6},s.a.createElement("h4",{style:{fontWeight:700}},s.a.createElement(J.a,null)," "," ",E.isAuthenticated&&te!==Z?"Your feed":"Popular topics")),s.a.createElement(b.a,{item:!0,xs:6,sm:6,md:6,align:"right"},s.a.createElement(P.a,{onClick:ne,startIcon:s.a.createElement(N.a,null),style:{color:"grey",fontWeight:700,textTransform:"none"}},"Customize feed")),O?s.a.createElement(G.a,null):null),s.a.createElement(B.a,{in:x},s.a.createElement(b.a,{container:!0},s.a.createElement(b.a,{item:!0,xs:6,sm:6,md:9},"Enter your interests to personalize the homepage feed."),s.a.createElement(b.a,{item:!0,xs:6,sm:6,md:3,align:"right"},s.a.createElement(z.a,{onClick:function(){return S(!1)},color:"primary"},s.a.createElement(L.a,null))),s.a.createElement(b.a,{item:!0,xs:12,sm:12,md:12},s.a.createElement(U.a,{value:V.interests,classes:{chip:e.chip},fullWidth:!0,label:"Tap enter to add more",onAdd:function(e){!function(e,t){var a;X(Object(n.a)(Object(n.a)({},V),{},(a={},Object(r.a)(a,e,t),Object(r.a)(a,"disabled",!1),a)))}("interests",Object(c.a)(V.interests).concat([Object(Y.g)(e)]))},onDelete:function(e,t){return function(e,t){var a,n=Object(c.a)(V[t]).filter((function(t){return t!==e}));X(Object.assign({},V,(a={},Object(r.a)(a,t,n),Object(r.a)(a,"disabled",!1),a)))}(e,"interests")}})),s.a.createElement(b.a,{item:!0,xs:12,sm:12,md:12,align:"right"},s.a.createElement(P.a,{disabled:V.disabled,onClick:ne},"Cancel"),s.a.createElement(P.a,{disabled:V.disabled,onClick:function(){t(Object(K.g)(!0)),function(){var e={status:"userupdates",index:"user_data",id:E._id,q:{doc:{interests:V.interests,lastUpdatedAt:new Date}}},t=new FormData;t.append("params",JSON.stringify(e)),Object(g.s)(t,E.key,re)}(),S(!1)}},"Save"))))),te.slice(0,m).map((function(e,t){return s.a.createElement(j.a,{key:t,ref:d},s.a.createElement(b.a,{container:!0,spacing:2},s.a.createElement(C,{term:e})))})),s.a.createElement(b.a,{container:!0,justify:"center"},m>=te.length?null:s.a.createElement(b.a,{item:!0,xs:12,align:"center"},"Load more",s.a.createElement(z.a,{size:"small",className:e.arrowBtn,onClick:function(){M(!0),setTimeout((function(){return M(!1)}),2e3),u(m+3),window.scrollTo(0,d.current.offsetTop+d.current.clientHeight)}},D?s.a.createElement(W.a,{size:20}):s.a.createElement(A.a,null)))))}}}]);
//# sourceMappingURL=17.edcd9682.chunk.js.map